openapi: 3.0.0
info:
  title: Reconciliation and Settlement Framework (RSF) for ONDC
  description: ONDC  Reconciliation and Settlement Framework API Specification
  version: 2.0.0
security:
  - SubscriberAuth: []
paths:
  /settle:
    post:
      tags:
        - Settlement Agency
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    collector_app_id:
                      type: string
                    receiver_app_id:
                      type: string
                    settlement:
                      $ref: '#/components/schemas/Settlement'
              required:
                - context
                - message
      responses:
        '200':
          description: Acknowledgement of message received
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      ack:
                        $ref: '#/components/schemas/Ack'
                    required:
                      - ack
                  error:
                    $ref: '#/components/schemas/Error'
                required:
                  - message
  /on_settle:
    post:
      tags:
        - Collector
        - Receiver
      requestBody:
        description: SA responds with /on_settle
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    collector_app_id:
                      type: string
                    receiver_app_id:
                      type: string
                    settlement:
                      $ref: '#/components/schemas/Settlement'
                  required:
                    - settlement
                error:
                  $ref: '#/components/schemas/Error'
              required:
                - context
                - message
      responses:
        '200':
          description: Acknowledgement of message received
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      ack:
                        $ref: '#/components/schemas/Ack'
                    required:
                      - ack
                  error:
                    $ref: '#/components/schemas/Error'
                required:
                  - message
  /report:
    post:
      tags:
        - Settlement Agency
      requestBody:
        description: SA responds with /on_settle
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    ref_transaction_id:
                      type: string
                    ref_message_id:
                      type: string
                error:
                  $ref: '#/components/schemas/Error'
              required:
                - context
                - message
      responses:
        '200':
          description: Acknowledgement of message received
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      ack:
                        $ref: '#/components/schemas/Ack'
                    required:
                      - ack
                  error:
                    $ref: '#/components/schemas/Error'
                required:
                  - message
  /on_report:
    post:
      tags:
        - Collector
        - Receiver
      requestBody:
        description: SA responds with /on_settle
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    collector_app_id:
                      type: string
                    receiver_app_id:
                      type: string
                    settlement:
                      $ref: '#/components/schemas/Settlement'
                  required:
                    - settlement
                error:
                  $ref: '#/components/schemas/Error'
              required:
                - context
                - message
      responses:
        '200':
          description: Acknowledgement of message received
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      ack:
                        $ref: '#/components/schemas/Ack'
                    required:
                      - ack
                  error:
                    $ref: '#/components/schemas/Error'
                required:
                  - message
components:
  securitySchemes:
    SubscriberAuth:
      type: apiKey
      in: header
      name: Authorization
      description: >-
        Signature of message body using Collector or Receiver subscriber's
        signing public key. <br/><br/>Format:<br/><br/><code>Authorization :
        Signature
        keyId="{subscriber_id}|{unique_key_id}|{algorithm}",algorithm="ed25519",created="1606970629",expires="1607030629",headers="(created)
        (expires) digest",signature="Base64(signing string)"</code>
  schemas:
    Ack:
      description: Describes the ACK response
      type: object
      properties:
        status:
          type: string
          description: >-
            Describe the status of the ACK response. If schema validation
            passes, status is ACK else it is NACK
          enum:
            - ACK
            - NACK
    Amount:
      type: object
      properties:
        currency:
          type: string
          example: INR
        value:
          type: string
          example: ''
    BankDetails:
      type: object
      properties:
        account_no:
          type: string
          example: ''
        ifsc_code:
          type: string
          example: ''
    Context:
      description: Describes a beckn message context
      type: object
      properties:
        domain:
          type: string
        location:
          type: object
          properties:
            country:
              type: object
              properties:
                code:
                  type: string
                  example: IND
            city:
              type: object
              properties:
                code:
                  type: string
                  example: '*'
        action:
          type: string
          description: >-
            Defines the Beckn API call. Any actions other than the enumerated
            actions are not supported by Beckn Protocol
        version:
          type: string
          description: Version of Beckn core API specification being used
        bap_id:
          type: string
          description: >-
            Unique id of the BAP. By default it is the fully qualified domain
            name of the BAP
        bap_uri:
          type: string
          format: uri
          description: >-
            URI of the BAP for accepting callbacks. Must have the same domain
            name as the bap_id
        bpp_id:
          type: string
          description: >-
            Unique id of the BPP. By default it is the fully qualified domain
            name of the BPP
        bpp_uri:
          type: string
          format: uri
          description: URI of the BPP. Must have the same domain name as the bap_id
        transaction_id:
          type: string
          description: >-
            This is a unique value which persists across all API calls from
            search through confirm
        message_id:
          type: string
          description: >-
            This is a unique value which persists during a request / callback
            cycle
        timestamp:
          type: string
          format: date-time
          description: Time of request generation in RFC3339 format
        key:
          type: string
          description: The encryption public key of the sender
        ttl:
          type: string
          description: >-
            The duration in ISO8601 format after timestamp for which this
            message holds valid
      required:
        - domain
        - action
        - location
        - version
        - transaction_id
        - message_id
        - bap_id
        - bap_uri
        - timestamp
    Error:
      description: >-
        Describes an error object that is returned by a Collector or Receiver as
        a response or callback to an action by another network participant. This
        object is sent when any request received by a network participant is
        unacceptable. This object can be sent either during Ack or with the
        callback.
      type: object
      properties:
        code:
          type: string
          description: Standard error code. For full list of error codes, refer to TBD
        message:
          type: string
          description: >-
            Human readable message describing the error. Used mainly for
            logging. Not recommended to be shown to the user.
    Orders:
      type: array
      items:
        type: object
        properties:
          id:
            description: Describes the order id
            type: string
          inter_participant:
            description: >-
              Provides details about the settlement amount, payable/ receivable
              and status between the Collector and the Receiver
            type: object
            properties:
              settled_amount:
                $ref: '#/components/schemas/Amount'
              amount:
                $ref: '#/components/schemas/Amount'
              status:
                type: string
                enum:
                  - SETTLED
                  - NOT-SETTLED
              reference_no:
                type: string
              error:
                $ref: '#/components/schemas/Error'
          collector:
            description: Provides details about the amount to be retained by the collector
            type: object
            properties:
              amount:
                $ref: '#/components/schemas/Amount'
          provider:
            description: >-
              Provides details about the amount to be settled to the Provider of
              an NP.
            type: object
            properties:
              id:
                type: string
                example: ''
              name:
                type: string
                example: ''
              bank_details:
                $ref: '#/components/schemas/BankDetails'
              status:
                type: string
                enum:
                  - SETTLED
                  - NOT-SETTLED
              amount:
                $ref: '#/components/schemas/Amount'
              reference_no:
                type: string
              error:
                $ref: '#/components/schemas/Error'
          self:
            type: object
            description: >-
              Provides details about the amount for the NP to move to their
              operative account
            properties:
              amount:
                $ref: '#/components/schemas/Amount'
              status:
                type: string
                enum:
                  - SETTLED
                  - NOT-SETTLED
              reference_no:
                type: string
              error:
                $ref: '#/components/schemas/Error'
    Settlement:
      description: >
        - Describes the settlement of NP -NP - Describes the miscellaneous
        settlement - Describes the NIL settlement
      type: object
      properties:
        type:
          description: Describes the type of the settlement
          type: string
        id:
          description: |
            * settlement id of the settlement file
          type: string
        order:
          $ref: '#/components/schemas/Orders'
x-enum:
  settle:
    context: &ref_0
      location:
        country:
          code:
            - code: IND
              description: Represents the country
              reference: <PR/Issue/Discussion Links md format text>
        city:
          code:
            - code: '*'
              description: city
              reference: <PR/Issue/Discussion Links md format text
      domain:
        - code: ONDC:NTS10
          description: RSF
          reference: <PR/Issue/Discussion Links md format text>
    message:
      settlement:
        type: &ref_1
          - &ref_3
            code: NP-NP
            description: Interparticipant settlement
            reference: <PR/Issue/Discussion Links md format text
          - &ref_4
            code: MISC
            description: Miscellaneous
            reference: <PR/Issue/Discussion Links md format text
          - code: NIL
            description: NP Declaring no settlement required
            reference: <PR/Issue/Discussion Links md format text
  on_settle:
    context: *ref_0
    message:
      settlement:
        type: *ref_1
        orders: &ref_5
          inter_participant: &ref_2
            status:
              - code: SETTLED
                description: settlement successful
                reference: <PR/Issue/Discussion Links md format text
              - code: NOT_SETTLED
                description: settlement unsuccessful
                reference: <PR/Issue/Discussion Links md format text
          provider: *ref_2
          self: *ref_2
  on_report:
    context: *ref_0
    message:
      settlement:
        type:
          - *ref_3
          - *ref_4
          - code: NIL
            description: NP declaring no settlement required
            reference: <PR/Issue/Discussion Links md format text
        orders: *ref_5
x-flows:
  - summary: RSF_NP-NP
    details:
      - description: >
          Detailed flows covering inter participant settlements. NPs (Collector
          and Receiver) share settlement instructions to the Settlement Agency
          and the settlement agency responds with whether the settlement was
          successful or not.


          In the example below, the collector is a retail seller app and the
          receiver is the retail buyer app. The retail seller app shares
          instructions for receivable for an order from the retail buyer app, to
          be sent to their own operating account (self) and their provider's
          account (provider). The retail buyer app shares instructions for
          payable for the respective order along with funds to be moved to their
          own operating amount (self).
        mermaid: |-
          sequenceDiagram
           participant Collector
            participant Settlement_Agency
           participant Receiver
           Collector ->> Settlement_Agency: settle API 
           Settlement_Agency -->> Collector: ack
           Receiver ->> Settlement_Agency: settle API
           Settlement_Agency -->> Receiver: ack
           Settlement_Agency ->> Collector : on_settle API
           Collector -->> Settlement_Agency: ack
           Settlement_Agency ->> Receiver : on_settle API
           Receiver -->> Settlement_Agency : ack
    references: if any
    steps:
      - summary: SETTLEMENT INSTRUCTIONS
        reference: if any
        api: settle
        example:
          value: &ref_12
            context:
              domain: ONDC:NTS10
              location:
                country:
                  code: IND
                city:
                  code: '*'
              version: 2.0.0
              action: settle
              bap_id: collectorapp.com
              bap_uri: https://collectorapp.com/ondc/1.0/
              bpp_id: sa_nocs.nbbl.com
              bpp_uri: https://sa_nocs.nbbl.com/nocs_test
              transaction_id: dc34a366-aebb-4144-9314-808dda82c7e6
              message_id: 941ed9a4-d74d-4411-ac06-469c0f9ac
              timestamp: '2024-05-09T11:36:51.897Z'
              ttl: P1D
            message:
              collector_app_id: collectorapp.com
              receiver_app_id: receiverapp.com
              settlement:
                type: NP-NP
                id: settlement-id-abc
                orders:
                  - id: ordr-123456
                    inter_participant:
                      amount:
                        currency: INR
                        value: '1000.00'
                    collector:
                      amount:
                        currency: INR
                        value: '50.00'
                    provider:
                      id: prvdr-id-789
                      name: Kirana Pvt Ltd
                      bank_details:
                        account_no: '1234567890'
                        ifsc_code: IFSC0001
                      amount:
                        currency: INR
                        value: '800.00'
                    self:
                      amount:
                        currency: INR
                        value: '200.00'
        details:
          - description: settlement instructions from NP to Settlement Agency
            mermaid: |-
              sequenceDiagram participant Collector
               participant Settlement_Agency
               participant Receiver
               rect rgb(191, 223, 255) 
               Collector ->> Settlement_Agency: settle API 
               Settlement_Agency ->> Collector : Ack    
               end
               Receiver ->> Settlement_Agency: settle API     
               Settlement_Agency ->> Collector : on_settle API
               Settlement_Agency ->> Receiver : on_settle API
      - summary: SETTLEMENT INSTRUCTIONS
        reference: if any
        api: settle
        example:
          value: &ref_15
            context:
              domain: ONDC:NTS10
              location:
                country:
                  code: IND
                city:
                  code: '*'
              version: 2.0.0
              action: settle
              bap_id: collectorapp.com
              bap_uri: https://collectorapp.com/ondc/1.0/
              bpp_id: sa_nocs.nbbl.com
              bpp_uri: https://sa_nocs.nbbl.com/nocs_test
              transaction_id: dc34a366-aebb-4144-9314-808dda82c7e6
              message_id: 941ed9a4-d74d-4411-ac06-469c0f9ac
              timestamp: '2024-05-09T11:36:51.897Z'
              ttl: P1D
            message:
              collector_app_id: collectorapp.com
              receiver_app_id: receiverapp.com
              settlement:
                type: NP-NP
                id: settlement-id-abc
                orders:
                  - id: ordr-123456
                    inter_participant:
                      amount:
                        currency: INR
                        value: '1000.00'
                    collector:
                      amount:
                        currency: INR
                        value: '50.00'
                    self:
                      amount:
                        currency: INR
                        value: '50.00'
        details:
          - description: settlement instructions from NP to Settlement Agency
            mermaid: |-
              sequenceDiagram participant Collector
               participant Settlement_Agency
               participant Receiver
               Collector ->> Settlement_Agency: settle API 
               rect rgb(191, 223, 255) 
               Receiver ->> Settlement_Agency: settle API
               Settlement_Agency ->> Receiver :Ack
               end
               Settlement_Agency ->> Collector : on_settle API
               Settlement_Agency ->> Receiver : on_settle API
      - summary: SETTLEMENT RESPONSE
        reference: if any
        api: on_settle
        example:
          value: &ref_7
            context:
              domain: ONDC:NTS10
              location:
                country:
                  code: IND
                city:
                  code: '*'
              version: 2.0.0
              action: on_settle
              bap_id: collectorapp.com
              bap_uri: https://collectorapp.in/ondc/1.0/
              bpp_id: sa_nocs.nbbl.com
              bpp_uri: https://sa_nocs.nbbl.com/nocs_test
              transaction_id: dc34a366-aebb-4144-9314-808dda82c7e6
              message_id: 941ed9a4-d74d-4411-ac06-469c0f9ac
              timestamp: '2024-05-09T13:36:51.000Z'
              ttl: P1D
            message:
              collector_app_id: collectorapp.com
              receiver_app_id: receiverapp.com
              settlement:
                type: NP-NP
                id: settlement-id-abc
                orders:
                  - id: ordr-123456
                    inter_participant:
                      settled_amount:
                        currency: INR
                        value: '1000.00'
                      amount:
                        currency: INR
                        value: '1000.12'
                      status: SETTLED
                      reference_no: '3245683618631'
                    collector:
                      amount:
                        currency: INR
                        value: '50.00'
                    provider:
                      id: prvdr-id-789
                      amount:
                        currency: INR
                        value: '800.00'
                      status: NOT-SETTLED
                      error:
                        code: '01'
                        message: Account inactive
                      reference_no: '1238683618634'
                    self:
                      amount:
                        currency: INR
                        value: '200.00'
                      status: NOT-SETTLED
                      reference_no: '1238683618634'
                      error:
                        code: '01'
                        message: Account inactive
        details:
          - description: Response from settlement agency
            mermaid: |-
              sequenceDiagram participant Collector
               participant Settlement_Agency
               participant Receiver
               Collector ->> Settlement_Agency: settle API 
               Receiver ->> Settlement_Agency: settle API
               rect rgb(191, 223, 255) 
               Settlement_Agency ->> Collector : on_settle API
               Collector ->> Settlement_Agency: Ack
               end
               Settlement_Agency ->> Receiver : on_settle API
      - summary: SETTLEMENT RESPONSE
        reference: if any
        api: on_settle
        example:
          value: &ref_10
            context:
              domain: ONDC:NTS10
              location:
                country:
                  code: IND
                city:
                  code: '*'
              version: 2.0.0
              action: on_settle
              bap_id: collectorapp.com
              bap_uri: https://collectorapp.in/ondc/1.0/
              bpp_id: sa_nocs.nbbl.com
              bpp_uri: https://sa_nocs.nbbl.com/nocs_test
              transaction_id: dc34a366-aebb-4144-9314-808dda82c7e6
              message_id: 941ed9a4-d74d-4411-ac06-469c0f9ac
              timestamp: '2024-05-09T13:36:51.000Z'
              ttl: P1D
            message:
              collector_app_id: collectorapp.com
              receiver_app_id: receiverapp.com
              settlement:
                type: NP-NP
                id: settlement-id-abc
                orders:
                  - id: ordr-123456
                    inter_participant:
                      settled_amount:
                        currency: INR
                        value: '1000.00'
                      amount:
                        currency: INR
                        value: '1000.12'
                      status: SETTLED
                      reference_no: '3245683618631'
                    collector:
                      amount:
                        currency: INR
                        value: '50.00'
                    self:
                      amount:
                        currency: INR
                        value: '50.00'
                      status: SETTLED
                      reference_no: '1238683618634'
        details:
          - description: Response from settlement agency
            mermaid: |-
              sequenceDiagram participant Collector
               participant Settlement_Agency
               participant Receiver
               Collector ->> Settlement_Agency: settle API 
               Receiver ->> Settlement_Agency: settle API
               Settlement_Agency ->> Collector : on_settle API
               rect rgb(191, 223, 255) 
               Settlement_Agency ->> Receiver : on_settle API
               Receiver ->> Settlement_Agency: Ack
               end
  - summary: RSF_MISC
    details:
      - description: >-
          Detailed flows covering miscellaneous or self settlements.  NPs share
          settlement instructions to the Settlement Agency  and the settlement
          agency responds with whether the settlement  was successful or not. In
          the example below, a retail seller app is sharing settlement
          instructions to move funds from their non operating account to their
          operating account and their respective provider's account.
        mermaid: |-
          sequenceDiagram
           participant NP
           participant Settlement_Agency
           NP ->> Settlement_Agency: settle API 
           Settlement_Agency ->> NP : on_settle API
           participant Receiver
           participant Settlement_Agency
           Receiver ->> Settlement_Agency: settle API 
           Settlement_Agency ->> Receiver : on_settle API
    references: if any
    steps:
      - summary: SETTLE
        api: settle
        details:
          - description: settle api
            mermaid: |-
              sequenceDiagram participant NP
               participant Settlement_Agency
              NP ->> Settlement_Agency: settle API 
               Settlement_Agency ->> NP : on_settle API
        reference: if any
        example:
          value: &ref_13
            context:
              domain: ONDC:NTS10
              location:
                country:
                  code: IND
                city:
                  code: '*'
              version: 2.0.0
              action: settle
              bap_id: collectorapp.com
              bap_uri: https://collectorapp.com/ondc/1.0/
              bpp_id: sa_nocs.nbbl.com
              bpp_uri: https://sa_nocs.nbbl.com/nocs_test
              transaction_id: ad73a366-aebb-4144-9314-808dda82c8e6
              message_id: 354ef6d7-d74d-4411-ac06-a05469c0f9ac
              timestamp: '2024-05-07T09:32:23.600Z'
              ttl: P1D
            message:
              collector_app_id: collectorapp.com
              receiver_app_id: receiverapp.com
              settlement:
                type: MISC
                id: settlement-id-123
                orders:
                  - self:
                      amount:
                        currency: INR
                        value: '200.00'
                    provider:
                      id: provider-id-789
                      name: Kirana Pvt Ltd.
                      bank_details:
                        account_no: '1234567890'
                        ifsc_code: IFSC0001
                      amount:
                        currency: INR
                        value: '200.00'
      - summary: ON_SETTLE
        api: on_settle
        details:
          - description: on_settle
            mermaid: |-
              sequenceDiagram participant NP
               participant Settlement_Agency
              NP ->> Settlement_Agency: settle API 
               Settlement_Agency ->> NP : on_settle API
        reference: if any
        example:
          value: &ref_8
            context:
              domain: ONDC:NTS10
              location:
                country:
                  code: IND
                city:
                  code: '*'
              version: 2.0.0
              action: on_settle
              bap_id: collectorapp.com
              bap_uri: https://collectorapp.com/ondc/1.0/
              bpp_id: sa_nocs.nbbl.com
              bpp_uri: https://sa_nocs.nbbl.com/nocs_test
              transaction_id: ad73a366-aebb-4144-9314-808dda82c8e6
              message_id: 354ef6d7-d74d-4411-ac06-a05469c0f9ac
              timestamp: '2024-05-07T09:32:23.623Z'
              ttl: PT30S
            message:
              collector_app_id: collectorapp.com
              receiver_app_id: receiverapp.com
              settlement:
                type: MISC
                id: settlement-id-123
                orders:
                  - provider:
                      id: provider-id-789
                      amount:
                        currency: INR
                        value: '200.12'
                      status: NOT-SETTLED
                      reference_no: '3718683618631'
                      error:
                        code: '01'
                        message: Account inactive
                    self:
                      amount:
                        currency: INR
                        value: '200.00'
                      status: SETTLED
                      reference_no: '3718683618631'
  - summary: RSF_NIL
    details:
      - description: >-
          Detailed flows covering the NPs declaring that no settlements (where
          they would act as a collector) are to be done for that settlement
          cycle.
        mermaid: |-
          sequenceDiagram
           participant NP(Collector/Receiver)
           participant Settlement_Agency
           NP(Collector/Receiver) ->> Settlement_Agency: settle API 
           Settlement_Agency ->> NP(Collector/Receiver) : on_settle API
    references: if any
    steps:
      - summary: SETTLE
        api: settle
        details:
          - description: settle api
            mermaid: |-
              sequenceDiagram participant NP(Collector/Receiver)
                participant Settlement_Agency
                NP(Collector/Receiver) ->> Settlement_Agency: settle API      
                Settlement_Agency ->> NP(Collector/Receiver) : on_settle API
        reference: if any
        example:
          value: &ref_14
            context:
              domain: ONDC:NTS10
              location:
                country:
                  code: IND
                city:
                  code: '*'
              version: 2.0.0
              action: settle
              bap_id: collectorapp.com
              bap_uri: https://collector.in/ondc/1.0/
              bpp_id: sa_nocs.nbbl.com
              bpp_uri: https://sa.nbbl.nbbl.com/nocs_test
              transaction_id: de73a489-aebb-4144-9314-808dda82c7e6
              message_id: 238ef6d7-d74d-4411-ac06-a05469c0f9ac
              timestamp: '2024-05-07T08:40:50.900Z'
              ttl: P1D
            message:
              settlement:
                type: NIL
      - summary: ON_SETTLE
        api: on_settle
        details:
          - description: on_settle
            mermaid: |-
              sequenceDiagram participant NP
               participant Settlement_Agency
               NP ->> Settlement_Agency: settle API 
               Settlement_Agency ->> NP : on_settle API
        reference: if any
        example:
          value: &ref_9
            context:
              domain: ONDC:NTS10
              location:
                country:
                  code: IND
                city:
                  code: '*'
              version: 2.0.0
              action: on_settle
              bap_id: collectorapp.com
              bap_uri: https://collectorapp.com/ondc/1.0/
              bpp_id: sa_nocs.nbbl.com
              bpp_uri: https://sa_nocs.nbbl.com/nocs_test
              transaction_id: de73a489-aebb-4144-9314-808dda82c7e6
              message_id: 238ef6d7-d74d-4411-ac06-a05469c0f9ac
              timestamp: '2024-05-07T08:40:51.000Z'
              ttl: P1D
            message:
              settlement:
                type: NIL
  - summary: RSF_REPORT
    details:
      - description: >-
          Detailed flows covering NPs seeking status of a settlement
          instructions previously shared with reference to a transaction id and/
          or message id. The settlement agency responds with the status of the
          respective settlement instructions referred.
        mermaid: |-
          sequenceDiagram
           participant NP
           participant Settlement_Agency
           NP ->> Settlement_Agency: report API 
           Settlement_Agency ->> NP : on_report API
    references: if any
    steps:
      - summary: REPORT
        api: report
        details:
          - description: report api
            mermaid: |-
              sequenceDiagram
               participant NP
               participant Settlement_Agency      
               NP ->> Settlement_Agency: report API 
               Settlement_Agency ->> NP : ACK
               Settlement_Agency ->> NP : on_report API
               NP ->> Settlement_Agency : Ack
        reference: if any
        example:
          value: &ref_11
            context:
              domain: ONDC:NTS10
              location:
                country:
                  code: IND
                city:
                  code: '*'
              version: 2.0.0
              action: report
              bap_id: collectorapp.com
              bap_uri: https://collector.com/ondc/1.0/
              bpp_id: sa_nocs.nbbl.com
              bpp_uri: https://nbbl.org.in/nocs_test
              transaction_id: cd73a366-aebb-4144-9314-808dda82c7e6
              message_id: 841ef6d7-d74d-4411-ac06-a05469c0f9ac
              timestamp: '2024-05-09T06:36:51.897Z'
              ttl: P1D
            message:
              ref_transaction_id: bd73a366-aebb-4144-9314-808dda82c7e6
              ref_message_id: 941ef6d7-d74d-4411-ac06-469c0f9ac
      - summary: ON_REPORT
        api: on_report
        details:
          - description: on_report
            mermaid: |-
              sequenceDiagram
               participant NP
               participant Settlement_Agency
               NP ->> Settlement_Agency: report API  
               Settlement_Agency ->> NP : Ack
               Settlement_Agency ->> NP : on_ report API
               NP ->> Settlement_Agency : Ack
        reference: if any
        example:
          value: &ref_6
            context:
              domain: ONDC:NTS10
              location:
                country:
                  code: IND
                city:
                  code: '*'
              version: 2.0.0
              action: on_report
              bap_id: collectorapp.com
              bap_uri: https://collectorapp.com/ondc/1.0/
              bpp_id: sa_nocs.nbbl.com
              bpp_uri: https://sa_nocs.nbbl.com/nocs_test
              transaction_id: cd73a366-aebb-4144-9314-808dda82c7e6
              message_id: 841ef6d7-d74d-4411-ac06-a05469c0f9ac
              timestamp: '2024-05-07T06:36:51.900Z'
              ttl: P1D
            message:
              collector_app_id: collectorapp.com
              receiver_app_id: receiverapp.com
              settlement:
                type: NP-NP
                id: settlement-id-123
                orders:
                  - id: order-id-456
                    inter_participant:
                      settled_amount:
                        currency: INR
                        value: '1000.00'
                      amount:
                        currency: INR
                        value: '1000.27'
                      status: SETTLED
                      reference_no: '3718683618631'
                      error:
                        code: '01'
                        message: Account Inactive
                    collector:
                      amount:
                        currency: INR
                        value: '50.00'
                    provider:
                      id: provider-id-789
                      amount:
                        currency: INR
                        value: '800.00'
                      status: NOT-SETTLED
                      error:
                        code: '01'
                        message: Account Inactive
                      reference_no: '3718683618634'
                    self:
                      amount:
                        currency: INR
                        value: '200.00'
                      status: NOT-SETTLED
                      reference_no: '3718683618634'
                      error:
                        code: '01'
                        message: Account inactive
x-examples:
  RSF:
    summary: RSF 2.0
    description: >-
      Reconciliation and Settlement Framework provides a comprehensive framework
      to ensure accurate and timely settlements among participants in the
      network. RSF 2.0 brings an enhanced workflow where the NPs share
      order-level the settlement instructions to the Settlement Agency (SA)
      which matches the same with the respective counterparty NP and then moves
      funds if the amounts have matched successfully.
    example_set:
      on_report:
        examples:
          - summary: on_report
            description: Response from settlement agency
            value: *ref_6
      on_settle:
        examples:
          - summary: on_settle misc
            value:
              context:
                domain: ONDC:NTS10
                location:
                  country:
                    code: IND
                  city:
                    code: '*'
                version: 2.0.0
                action: on_settle
                bap_id: collectorapp.com
                bap_uri: https://collectorapp.com/ondc/1.0/
                bpp_id: sa_nocs.nbbl.com
                bpp_uri: https://sa_nocs.nbbl.com/nocs_test
                transaction_id: ad73a366-aebb-4144-9314-808dda82c8e6
                message_id: 354ef6d7-d74d-4411-ac06-a05469c0f9ac
                timestamp: '2024-05-07T09:32:23.623Z'
                ttl: PT30S
              message:
                collector_app_id: collectorapp.com
                receiver_app_id: receiverapp.com
                settlement:
                  type: MISC
                  id: settlement-id-123
                  orders:
                    - provider:
                        id: provider-id-789
                        amount:
                          currency: INR
                          value: '200.12'
                        status: NOT-SETTLED
                        reference_no: '3718683618631'
                        error:
                          code: '01'
                          message: Account inactive
                      self:
                        amount:
                          currency: INR
                          value: '200.00'
                        status: SETTLED
                        reference_no: '3718683618631'
          - summary: on_settle nil
            value:
              context:
                domain: ONDC:NTS10
                location:
                  country:
                    code: IND
                  city:
                    code: '*'
                version: 2.0.0
                action: on_settle
                bap_id: collectorapp.com
                bap_uri: https://collectorapp.com/ondc/1.0/
                bpp_id: sa_nocs.nbbl.com
                bpp_uri: https://sa_nocs.nbbl.com/nocs_test
                transaction_id: de73a489-aebb-4144-9314-808dda82c7e6
                message_id: 238ef6d7-d74d-4411-ac06-a05469c0f9ac
                timestamp: '2024-05-07T08:40:51.000Z'
                ttl: P1D
              message:
                settlement:
                  type: NIL
          - summary: on_settle np-np
            value: *ref_7
          - summary: on_settle_misc
            description: TBD
            value: *ref_8
          - summary: on_settle_nil
            description: TBD
            value: *ref_9
          - summary: on_settle_np_np
            description: TBD
            value: *ref_10
      report:
        examples:
          - summary: report
            value: *ref_11
      settle:
        examples:
          - summary: settle nil
            value:
              context:
                domain: ONDC:NTS10
                location:
                  country:
                    code: IND
                  city:
                    code: '*'
                version: 2.0.0
                action: settle
                bap_id: collectorapp.com
                bap_uri: https://collector.in/ondc/1.0/
                bpp_id: sa_nocs.nbbl.com
                bpp_uri: https://sa.nbbl.nbbl.com/nocs_test
                transaction_id: de73a489-aebb-4144-9314-808dda82c7e6
                message_id: 238ef6d7-d74d-4411-ac06-a05469c0f9ac
                timestamp: '2024-05-07T08:40:50.900Z'
                ttl: P1D
              message:
                settlement:
                  type: NIL
          - summary: settle np-np
            value: *ref_12
          - summary: settle_misc
            description: TBD
            value: *ref_13
          - summary: settle_nil
            description: TBD
            value: *ref_14
          - summary: settle_np_np
            description: settlement instructions from NP to Settlement Agency
            value: *ref_15
          - summary: settle misc
            description: Miscellaneous / self settlement instruction
            value:
              context:
                domain: ONDC:NTS10
                location:
                  country:
                    code: IND
                  city:
                    code: '*'
                version: 2.0.0
                action: settle
                bap_id: collectorapp.com
                bap_uri: https://collectorapp.com/ondc/1.0/
                bpp_id: sa_nocs.nbbl.com
                bpp_uri: https://sa_nocs.nbbl.com/nocs_test
                transaction_id: ad73a366-aebb-4144-9314-808dda82c8e6
                message_id: 354ef6d7-d74d-4411-ac06-a05469c0f9ac
                timestamp: '2024-05-07T09:32:23.600Z'
                ttl: P1D
              message:
                collector_app_id: collectorapp.com
                receiver_app_id: receiverapp.com
                settlement:
                  type: MISC
                  id: settlement-id-123
                  orders:
                    - self:
                        amount:
                          currency: INR
                          value: '200.00'
                      provider:
                        id: provider-id-789
                        name: Kirana Pvt Ltd.
                        bank_details:
                          account_no: '1234567890'
                          ifsc_code: IFSC0001
                        amount:
                          currency: INR
                          value: '200.00'
x-attributes:
  RSF:
    attribute_set:
      settle_misc:
        context:
          domain:
            required: true
            type: string
            owner: any
            usage: ONDC:NTS10
          location:
            country:
              code:
                required: true
                type: string
                owner: any
                usage: IND
            city:
              code:
                required: true
                type: string
                owner: any
                usage: '*'
          version:
            required: true
            type: string
            owner: any
            usage: 2.0.0
          action:
            required: true
            type: string
            owner: any
            usage: settle
          bap_id:
            required: true
            type: string
            owner: any
            usage: collectorapp.com
          bap_uri:
            required: true
            type: string
            owner: any
            usage: https://collectorapp.com/ondc/1.0/
          bpp_id:
            required: true
            type: string
            owner: any
            usage: sa_nocs.nbbl.com
          bpp_uri:
            required: true
            type: string
            owner: any
            usage: https://sa_nocs.nbbl.com/nocs_test
          transaction_id:
            required: true
            type: string
            owner: any
            usage: ad73a366-aebb-4144-9314-808dda82c8e6
          message_id:
            required: true
            type: string
            owner: any
            usage: 354ef6d7-d74d-4411-ac06-a05469c0f9ac
          timestamp:
            required: true
            type: string
            owner: any
            usage: '2024-05-07T09:32:23.600Z'
          ttl:
            required: true
            type: string
            owner: any
            usage: P1D
        message:
          collector_app_id:
            required: true
            type: string
            owner: any
            usage: collectorapp.com
          receiver_app_id:
            required: true
            type: string
            owner: any
            usage: receiverapp.com
          settlement:
            type:
              required: true
              type: string
              owner: any
              usage: MISC
            id:
              required: true
              type: string
              owner: any
              usage: settlement-id-123
            orders:
              self:
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '200.00'
              provider:
                id:
                  required: true
                  type: string
                  owner: any
                  usage: provider-id-789
                name:
                  required: true
                  type: string
                  owner: any
                  usage: Kirana Pvt Ltd.
                bank_details:
                  account_no:
                    required: true
                    type: string
                    owner: any
                    usage: 1234567890
                  ifsc_code:
                    required: true
                    type: string
                    owner: any
                    usage: IFSC0001
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '200.00'
      settle_np-np:
        context:
          domain:
            required: true
            type: string
            owner: any
            usage: ONDC:NTS10
          location:
            country:
              code:
                required: true
                type: string
                owner: any
                usage: IND
            city:
              code:
                required: true
                type: string
                owner: any
                usage: '*'
          version:
            required: true
            type: string
            owner: any
            usage: 2.0.0
          action:
            required: true
            type: string
            owner: any
            usage: settle
          bap_id:
            required: true
            type: string
            owner: any
            usage: collectorapp.com
          bap_uri:
            required: true
            type: string
            owner: any
            usage: https://collectorapp.com/ondc/1.0/
          bpp_id:
            required: true
            type: string
            owner: any
            usage: sa_nocs.nbbl.com
          bpp_uri:
            required: true
            type: string
            owner: any
            usage: https://sa_nocs.nbbl.com/nocs_test
          transaction_id:
            required: true
            type: string
            owner: any
            usage: ad73a366-aebb-4144-9314-808dda82c8e6
          message_id:
            required: true
            type: string
            owner: any
            usage: 354ef6d7-d74d-4411-ac06-a05469c0f9ac
          timestamp:
            required: true
            type: string
            owner: any
            usage: '2024-05-07T09:32:23.600Z'
          ttl:
            required: true
            type: string
            owner: any
            usage: P1D
        message:
          collector_app_id:
            required: true
            type: string
            owner: any
            usage: collectorapp.com
          receiver_app_id:
            required: true
            type: string
            owner: any
            usage: receiverapp.com
          settlement:
            type:
              required: true
              type: string
              owner: any
              usage: NP-NP
            id:
              required: true
              type: string
              owner: any
              usage: settlement-id-abc
            orders:
              self:
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '200.00'
              provider:
                id:
                  required: true
                  type: string
                  owner: any
                  usage: prvdr-id-789
                name:
                  required: true
                  type: string
                  owner: any
                  usage: Kirana Pvt Ltd
                bank_details:
                  account_no:
                    required: true
                    type: string
                    owner: any
                    usage: '1234567890'
                  ifsc_code:
                    required: true
                    type: string
                    owner: any
                    usage: IFSC0001
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '800.00'
              id:
                required: true
                type: string
                owner: any
                usage: ordr-123456
              inter_participant:
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '1000.00'
              collector:
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '50.00'
      settle_nil:
        context:
          domain:
            required: true
            type: string
            owner: any
            usage: ONDC:NTS10
          location:
            country:
              code:
                required: true
                type: string
                owner: any
                usage: IND
            city:
              code:
                required: true
                type: string
                owner: any
                usage: '*'
          version:
            required: true
            type: string
            owner: any
            usage: 2.0.0
          action:
            required: true
            type: string
            owner: any
            usage: settle
          bap_id:
            required: true
            type: string
            owner: any
            usage: collectorapp.com
          bap_uri:
            required: true
            type: string
            owner: any
            usage: https://collectorapp.com/ondc/1.0/
          bpp_id:
            required: true
            type: string
            owner: any
            usage: sa_nocs.nbbl.com
          bpp_uri:
            required: true
            type: string
            owner: any
            usage: https://sa_nocs.nbbl.com/nocs_test
          transaction_id:
            required: true
            type: string
            owner: any
            usage: ad73a366-aebb-4144-9314-808dda82c8e6
          message_id:
            required: true
            type: string
            owner: any
            usage: 354ef6d7-d74d-4411-ac06-a05469c0f9ac
          timestamp:
            required: true
            type: string
            owner: any
            usage: '2024-05-07T09:32:23.600Z'
          ttl:
            required: true
            type: string
            owner: any
            usage: P1D
        message:
          collector_app_id:
            required: true
            type: string
            owner: any
            usage: collectorapp.com
          receiver_app_id:
            required: true
            type: string
            owner: any
            usage: receiverapp.com
          settlement:
            type:
              required: true
              type: string
              owner: any
              usage: NIL
            id:
              required: true
              type: string
              owner: any
              usage: settlement-id-abc
            orders:
              self:
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '200.00'
              provider:
                id:
                  required: true
                  type: string
                  owner: any
                  usage: prvdr-id-789
                name:
                  required: true
                  type: string
                  owner: any
                  usage: Kirana Pvt Ltd
                bank_details:
                  account_no:
                    required: true
                    type: string
                    owner: any
                    usage: '1234567890'
                  ifsc_code:
                    required: true
                    type: string
                    owner: any
                    usage: IFSC0001
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '800.00'
              id:
                required: true
                type: string
                owner: any
                usage: ordr-123456
              inter_participant:
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '1000.00'
              collector:
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '50.00'
      on_settle:
        context:
          domain:
            required: true
            type: string
            owner: any
            usage: ONDC:NTS10
          location:
            country:
              code:
                required: true
                type: string
                owner: any
                usage: IND
            city:
              code:
                required: true
                type: string
                owner: any
                usage: '*'
          version:
            required: true
            type: string
            owner: any
            usage: 2.0.0
          action:
            required: true
            type: string
            owner: any
            usage: on_settle
          bap_id:
            required: true
            type: string
            owner: any
            usage: collectorapp.com
          bap_uri:
            required: true
            type: string
            owner: any
            usage: https://collectorapp.com/ondc/1.0/
          bpp_id:
            required: true
            type: string
            owner: any
            usage: sa_nocs.nbbl.com
          bpp_uri:
            required: true
            type: string
            owner: any
            usage: https://sa_nocs.nbbl.com/nocs_test
          transaction_id:
            required: true
            type: string
            owner: any
            usage: ad73a366-aebb-4144-9314-808dda82c8e6
          message_id:
            required: true
            type: string
            owner: any
            usage: 354ef6d7-d74d-4411-ac06-a05469c0f9ac
          timestamp:
            required: true
            type: string
            owner: any
            usage: '2024-05-07T09:32:23.600Z'
          ttl:
            required: true
            type: string
            owner: any
            usage: P1D
        message:
          collector_app_id:
            required: true
            type: string
            owner: any
            usage: collectorapp.com
          receiver_app_id:
            required: true
            type: string
            owner: any
            usage: receiverapp.com
          settlement:
            type:
              required: true
              type: string
              owner: any
              usage: NP-NP
            id:
              required: true
              type: string
              owner: any
              usage: settlement-id-abc
            orders:
              self:
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '200.00'
                status:
                  required: true
                  type: string
                  owner: any
                  usage: NOT-SETTLED
                reference_no:
                  required: true
                  type: string
                  owner: any
                  usage: '1238683618634'
                error:
                  code:
                    required: true
                    type: string
                    owner: any
                    usage: '01'
                  message:
                    required: true
                    type: string
                    owner: any
                    usage: Account inactive
              provider:
                id:
                  required: true
                  type: string
                  owner: any
                  usage: prvdr-id-789
                name:
                  required: true
                  type: string
                  owner: any
                  usage: Kirana Pvt Ltd
                bank_details:
                  account_no:
                    required: true
                    type: string
                    owner: any
                    usage: '1234567890'
                  ifsc_code:
                    required: true
                    type: string
                    owner: any
                    usage: IFSC0001
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '800.00'
                status:
                  required: true
                  type: string
                  owner: any
                  usage: NOT-SETTLED
                reference_no:
                  required: true
                  type: string
                  owner: any
                  usage: '3718683618631'
                error:
                  code:
                    required: true
                    type: string
                    owner: any
                    usage: '01'
                  message:
                    required: true
                    type: string
                    owner: any
                    usage: Account inactive
              id:
                required: true
                type: string
                owner: any
                usage: ordr-123456
              inter_participant:
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '1000.00'
                status:
                  required: true
                  type: string
                  owner: any
                  usage: SETTLED
                reference_no:
                  required: true
                  type: string
                  owner: any
                  usage: '3718683618631'
                error:
                  code:
                    required: true
                    type: string
                    owner: any
                    usage: '01'
                  message:
                    required: true
                    type: string
                    owner: any
                    usage: Account inactive
              collector:
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '50.00'
      report:
        context:
          domain:
            required: true
            type: string
            owner: any
            usage: ONDC:NTS10
          location:
            country:
              code:
                required: true
                type: string
                owner: any
                usage: IND
            city:
              code:
                required: true
                type: string
                owner: any
                usage: '*'
          version:
            required: true
            type: string
            owner: any
            usage: 2.0.0
          action:
            required: true
            type: string
            owner: any
            usage: report
          bap_id:
            required: true
            type: string
            owner: any
            usage: collectorapp.com
          bap_uri:
            required: true
            type: string
            owner: any
            usage: https://collectorapp.com/ondc/1.0/
          bpp_id:
            required: true
            type: string
            owner: any
            usage: sa_nocs.nbbl.com
          bpp_uri:
            required: true
            type: string
            owner: any
            usage: https://sa_nocs.nbbl.com/nocs_test
          transaction_id:
            required: true
            type: string
            owner: any
            usage: d73a366-aebb-4144-9314-808dda82c7e6
          message_id:
            required: true
            type: string
            owner: any
            usage: 841ef6d7-d74d-4411-ac06-a05469c0f9ac
          timestamp:
            required: true
            type: string
            owner: any
            usage: '2024-05-09T06:36:51.897Z'
          ttl:
            required: true
            type: string
            owner: any
            usage: P1D
        message:
          collector_app_id:
            required: true
            type: string
            owner: any
            usage: collectorapp.com
          receiver_app_id:
            required: true
            type: string
            owner: any
            usage: receiverapp.com
          settlement:
            type:
              required: true
              type: string
              owner: any
              usage: NP-NP
            id:
              required: true
              type: string
              owner: any
              usage: settlement-id-abc
            orders:
              self:
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '200.00'
                status:
                  required: true
                  type: string
                  owner: any
                  usage: NOT-SETTLED
                reference_no:
                  required: true
                  type: string
                  owner: any
                  usage: '1238683618634'
                error:
                  code:
                    required: true
                    type: string
                    owner: any
                    usage: '01'
                  message:
                    required: true
                    type: string
                    owner: any
                    usage: Account inactive
              provider:
                id:
                  required: true
                  type: string
                  owner: any
                  usage: prvdr-id-789
                name:
                  required: true
                  type: string
                  owner: any
                  usage: Kirana Pvt Ltd
                bank_details:
                  account_no:
                    required: true
                    type: string
                    owner: any
                    usage: '1234567890'
                  ifsc_code:
                    required: true
                    type: string
                    owner: any
                    usage: IFSC0001
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '800.00'
                status:
                  required: true
                  type: string
                  owner: any
                  usage: NOT-SETTLED
                reference_no:
                  required: true
                  type: string
                  owner: any
                  usage: '3718683618631'
                error:
                  code:
                    required: true
                    type: string
                    owner: any
                    usage: '01'
                  message:
                    required: true
                    type: string
                    owner: any
                    usage: Account inactive
              id:
                required: true
                type: string
                owner: any
                usage: ordr-123456
              inter_participant:
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '1000.00'
                status:
                  required: true
                  type: string
                  owner: any
                  usage: SETTLED
                reference_no:
                  required: true
                  type: string
                  owner: any
                  usage: '3718683618631'
                error:
                  code:
                    required: true
                    type: string
                    owner: any
                    usage: '01'
                  message:
                    required: true
                    type: string
                    owner: any
                    usage: Account inactive
              collector:
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '50.00'
          ref_transaction_id:
            required: true
            type: string
            owner: any
            usage: bd73a366-aebb-4144-9314-808dda82c7e6
          ref_message_id:
            required: true
            type: string
            owner: any
            usage: 941ef6d7-d74d-4411-ac06-469c0f9ac
      on_report:
        context:
          domain:
            required: true
            type: string
            owner: any
            usage: ONDC:NTS10
          location:
            country:
              code:
                required: true
                type: string
                owner: any
                usage: IND
            city:
              code:
                required: true
                type: string
                owner: any
                usage: '*'
          version:
            required: true
            type: string
            owner: any
            usage: 2.0.0
          action:
            required: true
            type: string
            owner: any
            usage: on_report
          bap_id:
            required: true
            type: string
            owner: any
            usage: collectorapp.com
          bap_uri:
            required: true
            type: string
            owner: any
            usage: https://collectorapp.com/ondc/1.0/
          bpp_id:
            required: true
            type: string
            owner: any
            usage: sa_nocs.nbbl.com
          bpp_uri:
            required: true
            type: string
            owner: any
            usage: https://sa_nocs.nbbl.com/nocs_test
          transaction_id:
            required: true
            type: string
            owner: any
            usage: cd73a366-aebb-4144-9314-808dda82c7e6
          message_id:
            required: true
            type: string
            owner: any
            usage: 841ef6d7-d74d-4411-ac06-a05469c0f9ac
          timestamp:
            required: true
            type: string
            owner: any
            usage: '2024-05-07T06:36:51.900Z'
          ttl:
            required: true
            type: string
            owner: any
            usage: P1D
        message:
          collector_app_id:
            required: true
            type: string
            owner: any
            usage: collectorapp.com
          receiver_app_id:
            required: true
            type: string
            owner: any
            usage: receiverapp.com
          settlement:
            type:
              required: true
              type: string
              owner: any
              usage: NP-NP
            id:
              required: true
              type: string
              owner: any
              usage: settlement-id-123
            orders:
              self:
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '200.00'
                status:
                  required: true
                  type: string
                  owner: any
                  usage: NOT-SETTLED
                reference_no:
                  required: true
                  type: string
                  owner: any
                  usage: '3718683618631'
                error:
                  code:
                    required: true
                    type: string
                    owner: any
                    usage: '01'
                  message:
                    required: true
                    type: string
                    owner: any
                    usage: Account inactive
              provider:
                id:
                  required: true
                  type: string
                  owner: any
                  usage: provider-id-789
                name:
                  required: true
                  type: string
                  owner: any
                  usage: Kirana Pvt Ltd
                bank_details:
                  account_no:
                    required: true
                    type: string
                    owner: any
                    usage: '1234567890'
                  ifsc_code:
                    required: true
                    type: string
                    owner: any
                    usage: IFSC0001
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '800.00'
                status:
                  required: true
                  type: string
                  owner: any
                  usage: NOT-SETTLED
                reference_no:
                  required: true
                  type: string
                  owner: any
                  usage: '3718683618631'
                error:
                  code:
                    required: true
                    type: string
                    owner: any
                    usage: '01'
                  message:
                    required: true
                    type: string
                    owner: any
                    usage: Account inactive
              id:
                required: true
                type: string
                owner: any
                usage: order-id-456
              inter_participant:
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '1000.00'
                status:
                  required: true
                  type: string
                  owner: any
                  usage: SETTLED
                reference_no:
                  required: true
                  type: string
                  owner: any
                  usage: '3718683618631'
                error:
                  code:
                    required: true
                    type: string
                    owner: any
                    usage: '01'
                  message:
                    required: true
                    type: string
                    owner: any
                    usage: Account inactive
                currency:
                  required: true
                  type: string
                  owner: any
                  usage: INR
                value:
                  required: true
                  type: string
                  owner: any
                  usage: '1000.00'
              collector:
                amount:
                  currency:
                    required: true
                    type: string
                    owner: any
                    usage: INR
                  value:
                    required: true
                    type: string
                    owner: any
                    usage: '50.00'
          ref_transaction_id:
            required: true
            type: string
            owner: any
            usage: bd73a366-aebb-4144-9314-808dda82c7e6
          ref_message_id:
            required: true
            type: string
            owner: any
            usage: 941ef6d7-d74d-4411-ac06-469c0f9ac
x-errorcodes:
  code:
    - Event: NACK
      Description: Invalid Signature
      From: Any
      code: 70000
    - Event: NACK
      Description: Invalid Header
      From: Any
      code: 70001
    - Event: NACK
      Description: Invalid Schema
      From: Any
      code: 70002
    - Event: OnSettle
      Description: Invalid SA
      From: Any
      code: 70003
    - Event: NACK (Schema)
      Description: Order ID Not Found
      From: Any
      code: 70004
    - Event: OnSettle
      Description: Order ID mismatch
      From: Any
      code: 70005
    - Event: OnSettle
      Description: Duplicate Request
      From: Any
      code: 70006
    - Event: OnSettle
      Description: Amount mismatch - Payable/Receivable
      From: Any
      code: 70007
    - Event: OnSettle
      Description: Amount Mismatch - Withheld
      From: Any
      code: 70008
    - Event: OnSettle
      Description: Outflow Greater Than Receivable
      From: Any
      code: 70009
    - Event: NACK (Schema)
      Description: Invalid Seller Account Details
      From: Any
      code: 70010
    - Event: NACK (Schema)
      Description: Bad or Invalid Request error - Mandatory Attributes were missing
      From: Any
      code: 70011
    - Event: OnSettle
      Description: Invalid Collector App ID
      From: Any
      code: 70012
    - Event: OnSettle
      Description: Invalid Receiver App ID
      From: Any
      code: 70013
    - Event: OnSettle
      Description: No Claim from Counterparty (Only for Collector/Buyer App)
      From: Any
      code: 70014
    - Event: OnSettle
      Description: No Corresponding Payable initiated from Collector
      From: Any
      code: 70015
    - Event: OnSettle (Balance Check Failure)
      Description: Failed due to Insufficient Funds in Collector Account
      From: Any
      code: 70016
    - Event: OnSettle
      Description: Collector NDC Breach
      From: Any
      code: 70017
    - Event: OnSettle
      Description: Bank NDC Breach
      From: Any
      code: 70018
    - Event: OnSettle (Balance Check Status Failure)
      Description: Collector NOCA inoperable
      From: Any
      code: 70019
    - Event: OnSettle (Balance Check Status Failure)
      Description: Receiver NOCA inoperable
      From: Any
      code: 70020
    - Event: OnSettle (Balance Check Failure)
      Description: No bank response for balance
      From: Any
      code: 70021
    - Event: NACK
      Description: KeyDb Heart Beat Failure - (Internal Server Error - 503)
      From: Any
      code: 70022
    - Event: OnSettle
      Description: Receiver App ID same as Collector App ID
      From: Any
      code: 70023
    - Event: OnSettle
      Description: BAP ID doesnt match Collector or Receiver
      From: Any
      code: 70024
    - Event: OnSettle
      Description: Duplicate transaction ID
      From: Any
      code: 70025
    - Event: OnSettle
      Description: Duplicate transaction ID
      From: Any
      code: 70026
    - Event: OnSettle
      Description: Duplicate message ID
      From: Any
      code: 70027
    - Event: OnSettle
      Description: NIL file shared by Collector
      From: Any
      code: 70028
    - Event: OnSettle
      Description: Collector Value mismatch
      From: Any
      code: 70029
    - Event: OnSettle
      Description: Interparticipant Value mismatch
      From: Any
      code: 70030
    - Event: OnSettle
      Description: Order ID not shared by counterparty
      From: Any
      code: 70031
    - Event: OnSettle
      Description: No valid file shared by counterparty
      From: Any
      code: 70032
